This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitattributes
.gitignore
pages/__init__.py
pages/base_page.py
pages/login_page.py
pytest.ini
readme.md
requirements.txt
tests/__init__.py
tests/conftest.py
tests/test_auth.py
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitattributes">

</file>

<file path="pages/__init__.py">

</file>

<file path="pages/base_page.py">
import os
from datetime import datetime
from playwright.sync_api import Page, TimeoutError

class BasePage:
    def __init__(self, page: Page):
        self.page = page
        self.base_url = "localhost:8080/" # 대상 시스템 URL
        size = page.viewport_size
        if size['width'] != 1280 or size['height'] != 720:
            raise RuntimeError(
                f"❌ 해상도 불일치: 현재 {size['width']}x{size['height']}. "
                f"AI 탐지 최적화를 위해 1280x720이 강제되어야 합니다."
            )

    def navigate(self, path: str = ""):
        """페이지 이동"""
        self.page.goto(f"{self.base_url}")
        
    def do_click(self, selector: str, timeout: int = 5000):
        try:
            self.page.wait_for_selector(selector, state="visible", timeout=timeout)
            self.page.click(selector)
        except TimeoutError:
            # Task 2.1: 실패 시 학습 데이터 자동 수집
            self._capture_for_learning(selector)
            # Phase 3: AI 자가 치유 로직 호출부 (예정)
            raise Exception(f"Element not found: {selector}. AI 자가 치유 엔진 연동 필요.")
    
    def do_fill(self, selector: str, value: str, timeout: int = 5000):
        """공통 입력 메서드"""
        self.page.wait_for_selector(selector, state="visible", timeout=timeout)
        self.page.fill(selector, value)

    def _capture_for_learning(self, selector: str):
        """AI 학습용 스크린샷 캡처 (Task 1.4/2.1 연관)"""
        save_path = "datasets/raw_screenshots"
        os.makedirs(save_path, exist_ok=True)
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        self.page.screenshot(path=f"{save_path}/fail_{timestamp}.png")
</file>

<file path="pages/login_page.py">
# pages/login_page.py
from .base_page import BasePage

class LoginPage(BasePage):
    def __init__(self, page):
        super().__init__(page)
        # Selectors 
        self.email_fld = "//input[@aria-label='이메일' or @type='email']"
        self.password_fld = "//input[@type='password' or @aria-label='비밀번호']"
        self.login_btn = "//button[@type='submit' and @style=('font-size: 20px;')]"

    def login_to_system(self, email, password):
        """로그인 액션 플로우"""
        self.navigate("/login")
        self.do_fill(self.email_fld, email)
        self.do_fill(self.password_fld, password)
        self.do_click(self.login_btn)
</file>

<file path="readme.md">
.\venv\Scripts\Activate.ps1
가상환경 활성화
</file>

<file path="tests/__init__.py">

</file>

<file path="tests/conftest.py">
# tests/conftest.py
import pytest

@pytest.fixture(scope="session")
def browser_context_args(browser_context_args):
    """
    Playwright의 기본 브라우저 컨텍스트 설정을 오버라이드합니다.
    모든 테스트는 이 설정을 공통으로 상속받습니다.
    """
    return {
        **browser_context_args,
        # Task 1.2: AI 인식률 최적화를 위한 1280x720 고정 해상도
        "viewport": {
            "width": 1280,
            "height": 720,
        },
        # 고정 스케일 팩토리: OS별 고해상도 모니터(Retina 등)로 인한 픽셀 배수 차이 방지
        "device_scale_factor": 1,
        # 유저 에이전트 표준화: 브라우저 지문 차이로 인한 UI 변경 방지
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    }
</file>

<file path="tests/test_auth.py">
# tests/test_auth.py
import pytest
from pages.login_page import LoginPage

def test_successful_login(page):
    # 1. 페이지 객체 초기화
    login_page = LoginPage(page)
    
    # 2. 동작 수행 
    login_page.login_to_system("admin@devflow.com", "devpassword")
    
    # 3. 결과 검증 (Assertion)
    assert "/dashboard" in page.url
</file>

<file path=".gitignore">
# --- [Python & Environment] ---
.venv/
venv/
ENV/
__pycache__/
*.py[cod]
*$py.class
.env
.pytest_cache/

# --- [Playwright & Test Reports] ---
test-results/
playwright-report/
blob-report/
playwright/.local-browsers/
# Task 1.3 관련: API 로그인 세션 정보(쿠키/토큰)가 담긴 파일은 절대 금지
storage_state.json

# --- [AI/ML: YOLOv8 & Datasets] ---
# 학습 결과물 (가중치 파일 .pt, .onnx 등)
runs/
*.pt
*.onnx
# 대용량 학습 이미지 데이터셋 (Phase 2용)
datasets/
data/raw_screenshots/

# --- [IDEs & OS] ---
.vscode/
.idea/
.DS_Store
Thumbs.db

# --- [Logs] ---
*.log
npm-debug.log*
</file>

<file path="pytest.ini">
# pytest.ini
[pytest]
# 테스트 탐색을 시작할 기본 경로 설정
testpaths = tests
# 파이썬 경로에 현재 루트 폴더 추가
pythonpath = .
</file>

<file path="requirements.txt">
playwright==1.41.0
pytest==8.0.0
pytest-playwright==0.4.4
python-dotenv==1.0.1  # 환경 변수 관리용
</file>

</files>
